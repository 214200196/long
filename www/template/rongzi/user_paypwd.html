<div>
	<div class="m_change">
		<ul>
			<li><a href="{:U('users/userpwd')}"<eq name="Think.ACTION_NAME " value="userpwd"> class="onn"</eq> >登录密码</a></li>
			<li><a href="{:U('users/paypwd')}"<eq name="Think.ACTION_NAME " value="paypwd"> class="onn"</eq> >交易密码</a></li>
			<li><a href="{:U('users/protection')}"<eq name="Think.ACTION_NAME " value="protection"> class="onn"</eq> >密码保护</a></li>
			<li><a href="{:U('users/loginlog')}"<eq name="Think.ACTION_NAME " value="loginlog"> class="onn"</eq>>IP登录查询</a></li>
		</ul>
	</div>
	<eq name="Think.ACTION_NAME " value="paypwd">
	<div class="us_r_bor1">

		<!--修改安全密码 开始-->

		<form action="" name="form1" method="post"
			onsubmit="return check_form()">
			<div class="user_main_title1">密码请不要太简单，设成复杂一点，最好字母+符号</div>
			<div class="t20">
				<div class="user_right_border">
					<div class="l">原始交易密码：</div>
					<div class="c">
						<input type="password" name="oldpassword" tabindex="1">
						请输入原交易密码。(初始交易密码与您的登录密码一致)
					</div>
				</div>
				<div class="user_right_border">
					<div class="l">新交易密码：</div>
					<div class="c">
						<input type="password" name="newpassword" tabindex="2">
					</div>
				</div>
				<div class="user_right_border">
					<div class="l">确认交易密码：</div>
					<div class="c">
						<input type="password" name="newpassword1" tabindex="3">
					</div>
				</div>
				<div class="user_right_border">
					<div class="l">验证码：</div>
					<div class="c">
						<input name="valicode" type="text" size="11" maxlength="4"
							tabindex="4"> &nbsp;<img src="{:U('Index/verify')}"
							alt="点击刷新"
							onclick="this.src='{:U('Index/verify','','')}/' + Math.random();"
							align="absmiddle" style="cursor: pointer">
					</div>
				</div>
				<div class="user_right_border">
					<div class="l"></div>
					<div class="c">
						<input type="submit" name="name" value="确认提交" class="xinbuton"
							size="30" tabindex="5"> <a href="{:U('users/getpaypwd')}">忘记交易密码？</a>
					</div>
				</div>
			</div>
		</form>
		<div style="font-size: 12px;">* 温馨提示：我们将严格对用户的所有资料进行保密</div>

		<!--修改安全密码 结束-->

		<script>


			function check_form(){


				 var frm = document.forms['form1'];


				 var oldpassword = frm.elements['oldpassword'].value;


				 var newpassword = frm.elements['newpassword'].value;


				  var newpassword1 = frm.elements['newpassword1'].value;


				 var errorMsg = '';


				  if (oldpassword.length == 0 ) {


					errorMsg += '* 请输入旧密码，如果没有设定交易密码，请输入登录密码' + '\n';


				  }


				  if (newpassword.length == 0 ) {


					errorMsg += '* 新密码不能为空' + '\n';


				  }


				   if (newpassword.length >15 || newpassword.length<6 ) {


					errorMsg += '* 新密码长度在6到15之间' + '\n';


				  }


				    if (newpassword.length !=newpassword1.length) {


					errorMsg += '* 两次密码不一样' + '\n';


				  }


              	 var s = newpassword;
				  var pattern = /^(?!\D+$)(?![^a-zA-Z]+$).{6,15}$/;
                  if(pattern.test(s) == false){
				  errorMsg += '* 密码必须是字母和数字的组合' + '\n';
				  }
				  
				  if (errorMsg.length > 0){


					alert(errorMsg); return false;


				  } else{  


					return true;


				}


			


			}


		</script>
	</div>
	</eq>
	<eq name="Think.ACTION_NAME " value="userpwd">
	<div class="us_r_bor1">

		<!--修改登录密码 开始-->

		<form action="" name="form1" method="post"
			onsubmit="return check_form()">
			<div class="user_main_title1">密码请不要太简单，设成复杂一点，最好字母+符号</div>
			<div class="t20">
				<div class="user_right_border">
					<div class="l">原始密码：</div>
					<div class="c">
						<input type="password" name="oldpassword">
					</div>
				</div>
				<div class="user_right_border">
					<div class="l">新密码：</div>
					<div class="c">
						<input type="password" name="newpassword">
					</div>
				</div>
				<div class="user_right_border">
					<div class="l">确认密码：</div>
					<div class="c">
						<input type="password" name="newpassword1">
					</div>
				</div>
				<div class="user_right_border">
					<div class="l"></div>
					<div class="c">
						<input type="submit" name="name" value="确认提交" class="xinbuton"
							size="30">
					</div>
				</div>
			</div>
		</form>
		<div style="font-size: 12px;">* 温馨提示：我们将严格对用户的所有资料进行保密</div>
		<script>


			function check_form(){


				 var frm = document.forms['form1'];


				 var oldpassword = frm.elements['oldpassword'].value;


				 var newpassword = frm.elements['newpassword'].value;


				  var newpassword1 = frm.elements['newpassword1'].value;


				 var errorMsg = '';


				  if (oldpassword.length == 0 ) {


					errorMsg += '* 请输入旧的登录密码' + '\n';


				  }


				  if (newpassword.length == 0 ) {


					errorMsg += '* 新密码不能为空' + '\n';


				  }

                 
				   if (newpassword.length >15 || newpassword.length<6 ) {


					errorMsg += '* 新密码长度在6到15之间' + '\n';


				  }

             
				    if (newpassword.length !=newpassword1.length) {


					errorMsg += '* 两次密码不一样' + '\n';


				  }

                  var s = newpassword;
				  var pattern = /^(?!\D+$)(?![^a-zA-Z]+$).{6,15}$/;
                 // var pattern = /^(?!\D+$)(?![^a-zA-Z]+$)\S{6,15}$/;
                  if(pattern.test(s) == false){
				  errorMsg += '* 密码必须是字母和数字的组合' + '\n';
				  }
            
				  if (errorMsg.length > 0){


					alert(errorMsg); return false;


				  } else{  


					return true;


				}


			


			}


		</script>

		<!--修改登录密码 结束-->

	</div>
	</eq>
	<eq name="Think.ACTION_NAME " value="protection"> <!--密码保护 开始-->
	<form action="" method="post">
		<if
			condition="($_U.answer_type eq '2') OR ($_G['user_result']['answer'] eq '') ">

		<div class="user_help">请选择一个新的帐号保护问题,并输入答案。帐号保护可以为您以后在忘记密码、重要设置等操作的时候,提供安全保障。
		</div>
		<div class="user_right_border">
			<div class="l">设置问题：</div>
			<div class="c">
				<input type="text" name="question">
			</div>
		</div>
		<div class="user_right_border">
			<div class="l">请输入答案：</div>
			<div class="c">
				<input type="text" name="answer" /><input type="hidden" name="type"
					value="2" />
			</div>
		</div>
		<div class="user_right_border">
			<div class="l">验证码：</div>
			<div class="c">
				<input name="valicode" type="text" size="11" maxlength="4"
					tabindex="3" />&nbsp;<img src="{:U('Index/verify','','')}/"
					alt="点击刷新"
					onClick="this.src='{:U('Index/verify','','')}/=' + Math.random();"
					align="absmiddle" style="cursor: pointer" />
			</div>
		</div>
		<else />
		<div class="user_help">您已经设置了密码保护功能，请先输入答案再进行修改。</div>
		<div class="user_right_border">
			<div class="l">请选择问题：</div>
			<div class="c">{$_G.user_result.question}</div>
		</div>
		<div class="user_right_border">
			<div class="l">请输入答案：</div>
			<div class="c">
				<input type="text" name="answer" /> <input type="hidden"
					name="type" value="1" />
			</div>
		</div>

		</if>
		<div class="user_right_border">
			<div class="l"></div>
			<div class="c">
				<input type="submit" name="name" value="确认提交" class="xinbuton"
					size="30" />
			</div>
		</div>
		<div class="user_right_foot">* 温馨提示：我们将严格对用户的所有资料进行保密</div>

	</form>
	<!--密码保护 结束--> </eq>
	<eq name="Think.ACTION_NAME " value="loginlog">
	<div class="us_r_bor1">
		<div class="user_main_title1">说明：这里是您的登录时间，登录IP可能由于IP库的变化会有误差，敬请谅解。</div>
		<div class="t20">


			<table border="0" cellspacing="1" class="tabyel" width="100%">
				<form action="" method="post">
					<tr class="head">
						<td>登录时间</td>
						<td>登录IP</td>
						<td>IP所在地</td>
						<td>登录状态</td>
					</tr>
					<foreach name="list" item="item">
					<tr>
						<td>{$item.addtime|date="Y-m-d H:i:s",###}</td>
						<td>{$item.addip}</td>
						<td>{$item.addip|iparea}</td>
						<td><eq name="item.result" value="1">成功<else />失败</eq></td>
					</tr>
					</foreach>
					<tr>
						<td colspan="10" class="page">
							<div class="list_table_page">{$page}</div>
						</td>
					</tr>
				</form>
			</table>
		</div>
	</div>

	</eq>
    <eq name="Think.ACTION_NAME " value="getpaypwd">
       		<!--修改安全密码 开始-->
            <div class="us_r_bor1">
            <empty name="_G.user_result.paypassword">
      
            <div class="user_right_border">
			<div class="l">您未设置交易密码</div>
			<div class="c">
			</div>
		    </div>
       <else /> 
      <if condition="$Think.request.id neq ''"> 
		
		<form action="" name="form1" method="post" onsubmit="return check_form()" >
		<div class="user_help">请重新输入您的支付密码</div>
		<div class="user_right_border">
			<div class="l">请输入密码：</div>
			<div class="c">
				<input type="password" name="paypwd" />
			</div>
		</div>
		<div class="user_right_border">
			<div class="l">请再一次输入密码：</div>
			<div class="c">
				<input type="password" name="paypwd1" />
			</div>
		</div>
		<div class="user_right_border">
			<div class="l">验证码：</div>
			<div class="c">
				<input name="valicode" type="text" size="11" maxlength="4"  tabindex="3"/>&nbsp;<img src="{:U('Index/verify')}" alt="点击刷新" onClick="this.src='{:U('Index/verify','','')}/' + Math.random();" align="absmiddle" style="cursor:pointer" />
			</div>
		</div>
		<div class="user_right_border">
			<div class="l"></div>
			<div class="c">
				<input type="submit" name="name"  value="确认提交"  class="xinbuton" 
 size="30" /> 
			</div>
		</div>
		</form>
		<script>
			function check_form(){
				 var frm = document.forms['form1'];
				 var newpassword = frm.elements['paypwd'].value;
				  var newpassword1 = frm.elements['paypwd1'].value;
				 var errorMsg = '';
				  if (newpassword.length == 0 ) {
					errorMsg += '* 新密码不能为空' + '\n';
				  }
				   if (newpassword.length >15 || newpassword.length<6 ) {
					errorMsg += '* 新密码长度在6到15之间' + '\n';
				  }
				    if (newpassword.length !=newpassword1.length) {
					errorMsg += '* 两次密码不一样' + '\n';
				  }
				  if (errorMsg.length > 0){
					alert(errorMsg); return false;
				  } else{  
					return true;
				}
			
			}
		</script>
		<else/>
		<form action="" name="form1" method="post" >
		<div class="user_help">请登录邮箱找回</div>
		<div class="user_right_border">
			<div class="l">您的邮箱：</div>
			<div class="c">
				{$_G.user_result.email}
			</div>
		</div>
        <div class="user_right_border">
			<div class="l">密码保护问题：</div>
			<div class="c">
				{$_G.user_result.question}
			</div>
		</div>
        <div class="user_right_border">
			<div class="l">密保答案：</div>
			<div class="c">
			 <input name="answer" type="text" size="11"   tabindex="2"/>
			</div>
		</div>
		<div class="user_right_border">
			<div class="l">验证码：</div>
			<div class="c">
				<input name="valicode" type="text" size="11" maxlength="6"  tabindex="3"/>&nbsp;<img src="{:U('Index/verify')}" alt="点击刷新" onClick="this.src='{:U('index/verify','','')}/' + Math.random();" align="absmiddle" style="cursor:pointer" />
			</div>
		</div>
		<div class="user_right_border">
			<div class="l"></div>
			<div class="c">
				<input type="submit" name="name"  value="确认提交"  class="xinbuton" 
 size="30" /> 
			</div>
		</div>
		</form>
		</if></empty> 
		<div class="user_right_foot">
		* 温馨提示：我们将严格对用户的所有资料进行保密
		</div>
		<!--修改安全密码 结束--></div>
    </eq>
</div>
